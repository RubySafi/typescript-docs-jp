<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DOM の追加</title>
    <link rel="stylesheet" href="css/style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/monokai.min.css"
    />

    <link rel="stylesheet" href="css/html.css" />
    <link rel="stylesheet" href="css/dom-explain-dl.css" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/highlight.min.js"></script>

    <!-- MathJaxライブラリの読み込み -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script
      id="MathJax-script"
      async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
    ></script>
    <style>
      table {
        width: 100%;
        border-collapse: collapse;
        border: 1px solid #000;
      }

      th,
      td {
        border: 1px solid #000;
        padding: 8px;
        text-align: left;
      }
      table.typeof_table {
        max-width: 600px;
      }
      /* 1列目（渡す値） */
      table.typeof_table th:nth-child(1),
      table.typeof_table td:nth-child(1) {
        max-width: 300px;
        width: 30%;
      }

      /* 2列目（出力する値） */
      table.typeof_table th:nth-child(2),
      table.typeof_table td:nth-child(2) {
        max-width: 300px;
        width: 20%;
      }
      /* 2列目（出力する値） */
      table.typeof_table th:nth-child(3),
      table.typeof_table td:nth-child(3) {
        max-width: 300px;
        width: 50%;
      }

      h3 {
        border-left: 4px solid #3a8dde; /* 青系アクセントライン */
        padding-left: 0.6em;
        margin-top: 1.5em;
        font-size: 1.1em;
        color: #333; /* 落ち着いた本文寄りの色 */
        font-weight: bold;
      }

      table.dom_table {
        max-width: 1000px;
      }
      /* 1列目（渡す値） */
      table.dom_table th:nth-child(1),
      table.dom_table td:nth-child(1) {
        min-width: 300px;
        width: 40%;
      }

      /* 2列目（出力する値） */
      table.dom_table th:nth-child(2),
      table.dom_table td:nth-child(2) {
        max-width: 400px;
        width: 60%;
      }

      .demo-box {
        border: 1px solid #ccc;
        padding: 1em;
        margin: 1.5em 0;
        background-color: #fdfdfd;
        border-radius: 6px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      }

      ul.toc {
        list-style-type: disc;
        margin-left: 1.5em;
        padding-left: 0.5em;
        line-height: 1.6;
        font-size: 1rem;
      }

      ul.toc li a {
        color: #004080;
        text-decoration: none;
      }

      ul.toc li a:hover {
        text-decoration: underline;
        color: #0066cc;
      }

      h1.abstract {
        font-size: 1.8em;
        font-weight: bold;
        color: #2c3e50; /* 落ち着いた濃いグレー */
        border-bottom: 2px solid #ccc;
        padding-bottom: 0.3em;
        margin-bottom: 1em;
        margin-top: 1.5em;
      }

      .demo-box table,
      .demo-box th,
      .demo-box td,
      .demo-box tr {
        border: none;
        border-collapse: separate;
        padding: 0;
        margin: 0;
      }
    </style>
  </head>
  <body>
    <!-- ヘッダー -->
    <header>
      <h1>Input タグの応用 - TypeScript</h1>
    </header>

    <!-- パンくずリスト -->
    <nav class="breadcrumb-nav-grid">
      <div class="breadcrumb-container">
        <ul class="breadcrumb">
          <li><a href="index.html">ホーム</a></li>
          <li><a href="24-dom-input-advanced.html">Input タグの応用</a></li>
        </ul>
      </div>
      <div class="next-prev-links">
        &lt; <a href="23-ts-nullish-optional-prop.html" class="prev">前</a> |
        <a href="" class="next">次</a>&gt;
      </div>
    </nav>

    <!-- メインコンテンツ -->
    <main>
      <section class="content">
        <h1 class="abstract">Input タグの応用</h1>
        <p>input タグは，以下のようにテキスト入力欄を用意するもので，</p>
        <section>
          <section>
            <h2>使用例 - listタグ</h2>
            <p>値の取得と設定の例として，次のような処理を実装してみよう．</p>
            <div class="demo-box">
              <script src="js/24_1.js"></script>

              <label>Name: <input id="NameInput" type="text" /></label>
              <label
                >Info: <input id="InfoOutput" type="text" readonly
              /></label>
              <button onclick="convertInfo()">Convert</button>
            </div>
            <p>実装内容：</p>
            <ul>
              <li>
                Convert ボタンを押すと，Name
                テキストボックスに入力された情報が，Info
                テキストボックスに表示される．
              </li>
            </ul>
            <p>これを実現するコードが以下である．</p>
            <pre><code class="language-html">&lt;script src="dist/index.js"&gt;&lt;/script&gt;

  &lt;label&gt;Name: &lt;input id="NameInput" type="text" /&gt;&lt;/label&gt;
  &lt;label&gt;Info: &lt;input id="InfoOutput" type="text" readonly/&gt;&lt;/label&gt;
  &lt;button onclick="convertInfo()"&gt;Convert&lt;/button&gt;</code></pre>

            <pre><code class="language-ts index-ts">function convertInfo() {
  const input = document.getElementById('NameInput') as HTMLInputElement | null;
  const output = document.getElementById( 'InfoOutput' ) as HTMLInputElement | null;

  const text = input?.value;
  if (output !== null) {
    output.value = text ?? '';
  }
}</code></pre>
            <p>実装のポイントおよび注意点：</p>
            <ul>
              <li>
                それぞれの属性を null 許容型として取得する．
              </li>
              <li>
                オプショナルチェーン演算子により，null チェックを併用してテキストを取得する．
                </li>
                <li>値設定時は，null合体により，取得失敗したときの初期値も設定している</li>
            </ul>
            <p>今までは null チェックのため冗長なコードになっていたが，上記のように ? や ?? を使うと，null チェックをしつつ非常に簡潔にコードを書くことができる．
            </p>
            
            <div class="block-info">
              <span class="icon"></span>
              <div class="text-content">
                <p>
                  falsy な値，という概念を導入すると，上記コードはもっとスマートに書くことができる．これについては後のページで扱う．
                </p>
              </div>
            </div>
          </section>
        </section>
      </section>
    </main>

    <!-- フッター -->
    <footer>
      <small>Copyright &copy; 2025 by RubySafi. All right reserved.</small>
    </footer>

    <!-- コードハイライト用のスクリプト -->
    <script>
      hljs.highlightAll();
    </script>
  </body>
</html>
